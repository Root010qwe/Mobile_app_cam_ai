# üì± –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —à—É–º–æ–≤ –≤ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–µ

**–ü—Ä–µ–¥–º–µ—Ç:** –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –º—É–ª—å—Ç–∏–º–µ–¥–∏–∞  
**–¢–µ–º–∞:** –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–≥–æ –∑—Ä–µ–Ω–∏—è  
**–ó–∞–¥–∞–Ω–∏–µ:** –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —à—É–º–æ–≤ (–ì–∞—É—Å—Å–∞, –ò–º–ø—É–ª—å—Å–Ω—ã–π —à—É–º, –°–æ–ª—å –∏ –ø–µ—Ä–µ—Ü) –≤ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–µ –æ—Ç –≤–∏–¥–µ–æ–∫–∞–º–µ—Ä—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –º–∞—Å—à—Ç–∞–±–µ –≤—Ä–µ–º–µ–Ω–∏  

---

## üéØ –ó–∞–¥–∞–Ω–∏–µ

### –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã
–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è Android —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–≥–æ –∑—Ä–µ–Ω–∏—è, —Å–ø–æ—Å–æ–±–Ω–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —à—É–º–æ–≤ –≤ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–µ –æ—Ç –∫–∞–º–µ—Ä—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Android (Android Studio)
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** OpenCV, –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ (PyTorch Mobile)
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–¢–∏–ø—ã —à—É–º–æ–≤:** –ì–∞—É—Å—Å–æ–≤—Å–∫–∏–π, –ò–º–ø—É–ª—å—Å–Ω—ã–π, "–°–æ–ª—å –∏ –ø–µ—Ä–µ—Ü"

---

## –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ –∏ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤

### 1. –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–Ω–æ–≤—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —à—É–º–æ–≤

#### –ì–∞—É—Å—Å–æ–≤—Å–∫–∏–π —à—É–º
–ì–∞—É—Å—Å–æ–≤—Å–∫–∏–π —à—É–º –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º:
```
N(x) = (1/‚àö(2œÄœÉ¬≤)) * exp(-(x-Œº)¬≤/(2œÉ¬≤))
```
–≥–¥–µ:
- `Œº` - –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ (–æ–±—ã—á–Ω–æ 0)
- `œÉ` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
- `x` - –∑–Ω–∞—á–µ–Ω–∏–µ –ø–∏–∫—Å–µ–ª—è

#### –ò–º–ø—É–ª—å—Å–Ω—ã–π —à—É–º ("–°–æ–ª—å –∏ –ø–µ—Ä–µ—Ü")
–ò–º–ø—É–ª—å—Å–Ω—ã–π —à—É–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–º–∏ –ø–∏–∫—Å–µ–ª—è–º–∏ —Å —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:
```
I_noisy(x,y) = {
    I_max, —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é p/2
    I_min, —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é p/2  
    I_original(x,y), —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é (1-p)
}
```

### 2. –ê–ª–≥–æ—Ä–∏—Ç–º—ã —É–¥–∞–ª–µ–Ω–∏—è —à—É–º–æ–≤

#### –ì–∞—É—Å—Å–æ–≤—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä
```kotlin
// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≥–∞—É—Å—Å–æ–≤—Å–∫–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞
Imgproc.GaussianBlur(
    sourceMat,    // –∏—Å—Ö–æ–¥–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
    destinationMat, // —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    Size(kernelSize, kernelSize), // —Ä–∞–∑–º–µ—Ä —è–¥—Ä–∞
    sigma // —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
)
```

#### –ú–µ–¥–∏–∞–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä
```kotlin
// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–µ–¥–∏–∞–Ω–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞
Imgproc.medianBlur(
    sourceMat,    // –∏—Å—Ö–æ–¥–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
    destinationMat, // —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    kernelSize    // —Ä–∞–∑–º–µ—Ä —è–¥—Ä–∞
)
```

#### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä
```kotlin
// –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
fun adaptiveFilter(input: Mat, output: Mat, kernelSize: Int) {
    val localMean = Mat()
    val localVariance = Mat()
    
    // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ
    Imgproc.boxFilter(input, localMean, -1, Size(kernelSize, kernelSize))
    
    // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π –¥–∏—Å–ø–µ—Ä—Å–∏–∏
    val inputSquared = Mat()
    Core.multiply(input, input, inputSquared)
    Imgproc.boxFilter(inputSquared, localVariance, -1, Size(kernelSize, kernelSize))
    Core.subtract(localVariance, Core.multiply(localMean, localMean), localVariance)
    
    // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞
    val noiseVariance = estimateNoiseVariance(input)
    val adaptiveWeight = localVariance / (localVariance + noiseVariance)
    Core.multiply(adaptiveWeight, input, output)
    Core.add(output, Core.multiply(Core.subtract(Mat.ones(input.size(), input.type()), adaptiveWeight), localMean), output)
}
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
üìÅ app/src/main/java/com/example/lensflare/
‚îú‚îÄ‚îÄ üìÑ MainActivity.kt          # –ì–ª–∞–≤–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
‚îú‚îÄ‚îÄ üìÑ LensFlareProcessor.kt    # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –±–ª–∏–∫–æ–≤ (ML)
‚îî‚îÄ‚îÄ üìÑ NoiseRemovalProcessor.kt # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —à—É–º–æ–≤ (OpenCV)
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. MainActivity.kt
```kotlin
class MainActivity : ComponentActivity() {
    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä–æ–π –∏ UI
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
}
```

#### 2. NoiseRemovalProcessor.kt
```kotlin
class NoiseRemovalProcessor {
    enum class NoiseType {
        GAUSSIAN,      // –ì–∞—É—Å—Å–æ–≤—Å–∫–∏–π —à—É–º
        SALT_PEPPER,   // –®—É–º "—Å–æ–ª—å –∏ –ø–µ—Ä–µ—Ü"
        IMPULSE        // –ò–º–ø—É–ª—å—Å–Ω—ã–π —à—É–º
    }
    
    fun processImage(input: Mat, noiseType: NoiseType, kernelSize: Int, sigma: Double): Mat
}
```

#### 3. LensFlareProcessor.kt
```kotlin
class LensFlareProcessor(private val context: Context) {
    private var module: Module? = null
    
    fun processImage(bgrMat: Mat): Mat {
        // –ó–∞–≥—Ä—É–∑–∫–∞ ML –º–æ–¥–µ–ª–∏
        // –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
        // –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    }
}
```

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Android Studio** - IDE –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **Kotlin** - —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **OpenCV** - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–≥–æ –∑—Ä–µ–Ω–∏—è
- **PyTorch Mobile** - –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- **CameraX** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞–º–µ—Ä–æ–π

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```gradle
// –û—Å–Ω–æ–≤–Ω—ã–µ
implementation 'androidx.core:core-ktx:1.12.0'
implementation 'androidx.appcompat:appcompat:1.6.1'

// –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
implementation 'org.pytorch:pytorch_android_lite:1.13.1'
implementation 'org.pytorch:pytorch_android_torchvision_lite:1.13.1'

// –ö–∞–º–µ—Ä–∞
implementation 'androidx.camera:camera-core:1.3.1'
implementation 'androidx.camera:camera-camera2:1.3.1'
implementation 'androidx.camera:camera-lifecycle:1.3.1'
implementation 'androidx.camera:camera-view:1.3.1'

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
implementation project(':opencv')
```

---

## üìö –°–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã

1. OpenCV Documentation - https://docs.opencv.org/
2. PyTorch Mobile Documentation - https://pytorch.org/mobile/
3. Android CameraX Guide - https://developer.android.com/training/camerax
4. "Digital Image Processing" - Gonzalez, Woods
5. "Computer Vision: Algorithms and Applications" - Szeliski

---



